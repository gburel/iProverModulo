OCAMLDIR=@OCAMLDIR@
EDIR=@EDIR@
ROOT=@prefix@/bin

all:
	make -C $(OCAMLDIR) world opt opt.opt
	make -C $(OCAMLDIR) install
	make -C $(EDIR)
	make -C iprover_v0.7_patched
	make -C autotheo
	make -C launcher

install:
	make -C $(EDIR) install
	make -C iprover_v0.7_patched install
	make -C autotheo install
	make -C launcher install

starexec_install:
	cp /lib/x86_64-linux-gnu/libc.so.6 ${ROOT}/
	cp /lib/x86_64-linux-gnu/libdl.so.2 ${ROOT}/
	cp /lib/x86_64-linux-gnu/libm.so.6 ${ROOT}/
	cp /lib64/ld-linux-x86-64.so.2 ${ROOT}/ld.so

clean:
	make -C $(OCAMLDIR) clean
	make -C $(EDIR) clean
	make -C iprover_v0.7_patched clean
	make -C autotheo clean
	make -C launcher clean
